<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SettingsMenu.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">headless</a> &gt; <a href="index.source.html" class="el_package">com.mathochiststudios.escapefromuni.Menus</a> &gt; <span class="el_source">SettingsMenu.java</span></div><h1>SettingsMenu.java</h1><pre class="source lang-java linenums">package com.mathochiststudios.escapefromuni.Menus;

import javax.swing.JFrame;
import javax.swing.JOptionPane;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.InputProcessor;
import com.badlogic.gdx.graphics.Color;
import com.badlogic.gdx.math.Vector2;
import com.badlogic.gdx.utils.ScreenUtils;
import com.badlogic.gdx.utils.viewport.FitViewport;
import com.mathochiststudios.escapefromuni.Tests.HeadlessStage;
import com.mathochiststudios.escapefromuni.Tests.ISpriteBatch;
import com.mathochiststudios.escapefromuni.Tests.IStage;
import com.mathochiststudios.escapefromuni.Tests.LiveStage;
import com.mathochiststudios.escapefromuni.UI.Mouse;
import com.mathochiststudios.escapefromuni.UI.TextBox;

public class SettingsMenu extends AbstractMenu{

    IStage stage;
    TextBox nameBox;
<span class="fc" id="L23">    String name = &quot;Player&quot;;</span>
<span class="fc" id="L24">    String difficulty = &quot;Normal&quot;;</span>
<span class="fc" id="L25">    boolean music = true;</span>

    public SettingsMenu(ISpriteBatch batch,
                               FitViewport viewport,
                               boolean buttonCD,
                               Mouse mouse,
                               MenuTextureManager textureManager,
                               String name,
                               String difficulty,
                               Boolean music,
                               IStage stage
    ) {
<span class="fc" id="L37">        super(batch, viewport, buttonCD, mouse, textureManager);</span>

        try {
<span class="nc" id="L40">            stage = new LiveStage(viewport);</span>
<span class="nc" id="L41">            Gdx.input.setInputProcessor((InputProcessor) stage);</span>
<span class="fc" id="L42">        } catch (IllegalArgumentException e) {</span>
<span class="fc" id="L43">            stage = new HeadlessStage(null);</span>
<span class="nc" id="L44">        }</span>

<span class="fc" id="L46">        this.name = name;</span>
<span class="fc" id="L47">        this.difficulty = difficulty;</span>
<span class="fc" id="L48">        this.stage = stage;</span>
<span class="fc" id="L49">        this.music = music;</span>

<span class="fc" id="L51">        nameBox = new TextBox(stage, 250+80, 600, 300, 40);</span>
<span class="fc" id="L52">    }</span>


<span class="fc" id="L55">    boolean alreadyClicked = true;</span>

    @Override
    public String input() {
<span class="nc" id="L59">        mouse.update(viewport);</span>
<span class="nc bnc" id="L60" title="All 2 branches missed.">        if (Gdx.input.isTouched()) {</span>
<span class="nc bnc" id="L61" title="All 2 branches missed.">            if (!buttonCD) {</span>

<span class="nc bnc" id="L63" title="All 2 branches missed.">                if (textureManager.getNextButtonSprite().getBoundingRectangle().contains(new Vector2(mouse.getX(), mouse.getY()))) {</span>
<span class="nc bnc" id="L64" title="All 4 branches missed.">                    if (name.length() &gt; 0 &amp;&amp; name.length() &lt;= 15) {</span>
<span class="nc" id="L65">                        return &quot;Main&quot;;</span>
                    }
                    else {
<span class="nc" id="L68">                        JFrame coolbox = new JFrame();</span>
<span class="nc" id="L69">                        JOptionPane.showMessageDialog(coolbox , &quot;Pick a valid name below 15 characters!&quot;);</span>
                    }
                }
<span class="nc bnc" id="L72" title="All 2 branches missed.">                if (textureManager.getSubmitSprite().getBoundingRectangle().contains(new Vector2(mouse.getX(),mouse.getY()))) {</span>
<span class="nc" id="L73">                    name = nameBox.getText();</span>
                }
<span class="nc bnc" id="L75" title="All 4 branches missed.">                if (textureManager.getRightArrowSprite().getBoundingRectangle().contains(new Vector2(mouse.getX(),mouse.getY()))  &amp;&amp; !alreadyClicked) {</span>
<span class="nc bnc" id="L76" title="All 2 branches missed.">                    if (difficulty.equals(&quot;Easy&quot;)) {</span>
<span class="nc" id="L77">                        difficulty = &quot;Normal&quot;;</span>
                    }
<span class="nc bnc" id="L79" title="All 2 branches missed.">                    else if (difficulty.equals(&quot;Normal&quot;)) {</span>
<span class="nc" id="L80">                        difficulty = &quot;Hard&quot;;</span>
                    }
<span class="nc bnc" id="L82" title="All 2 branches missed.">                    else if (difficulty.equals(&quot;Hard&quot;)) {</span>
<span class="nc" id="L83">                        difficulty = &quot;Easy&quot;;</span>
                    }
                }
<span class="nc bnc" id="L86" title="All 4 branches missed.">                if (textureManager.getLeftArrowSprite().getBoundingRectangle().contains(new Vector2(mouse.getX(),mouse.getY())) &amp;&amp; !alreadyClicked) {</span>
<span class="nc bnc" id="L87" title="All 2 branches missed.">                    if (difficulty.equals(&quot;Easy&quot;)) {</span>
<span class="nc" id="L88">                        difficulty = &quot;Hard&quot;;</span>
                    }
<span class="nc bnc" id="L90" title="All 2 branches missed.">                    else if (difficulty.equals(&quot;Normal&quot;)) {</span>
<span class="nc" id="L91">                        difficulty = &quot;Easy&quot;;</span>
                    }
<span class="nc bnc" id="L93" title="All 2 branches missed.">                    else if (difficulty.equals(&quot;Hard&quot;)) {</span>
<span class="nc" id="L94">                        difficulty = &quot;Normal&quot;;</span>
                    }
                }
<span class="nc bnc" id="L97" title="All 4 branches missed.">                if (textureManager.getTwoRightArrowSprite().getBoundingRectangle().contains(new Vector2(mouse.getX(),mouse.getY()))  &amp;&amp; !alreadyClicked) {</span>
<span class="nc bnc" id="L98" title="All 2 branches missed.">                    music = !music;</span>
                }
<span class="nc bnc" id="L100" title="All 4 branches missed.">                if (textureManager.getTwoLeftArrowSprite().getBoundingRectangle().contains(new Vector2(mouse.getX(),mouse.getY())) &amp;&amp; !alreadyClicked) {</span>
<span class="nc bnc" id="L101" title="All 2 branches missed.">                    music = !music;</span>
                }
<span class="nc" id="L103">                alreadyClicked = true;</span>
            }
        }
        else {
<span class="nc" id="L107">            alreadyClicked = false;</span>
        }
<span class="nc" id="L109">        if (</span>
<span class="nc bnc" id="L110" title="All 2 branches missed.">                textureManager.getSubmitSprite().getBoundingRectangle().contains(</span>
<span class="nc" id="L111">                    new Vector2(mouse.getX(),mouse.getY())</span>
                )) {
<span class="nc" id="L113">                hoveredOver = &quot;Submit&quot;;</span>
            }
<span class="nc" id="L115">        else if (</span>
<span class="nc bnc" id="L116" title="All 2 branches missed.">                textureManager.getNextButtonSprite().getBoundingRectangle().contains(</span>
<span class="nc" id="L117">                    new Vector2(mouse.getX(),mouse.getY())</span>
                )) {
<span class="nc" id="L119">                hoveredOver = &quot;Next&quot;;</span>
            }
        else {
<span class="nc" id="L122">            hoveredOver = &quot;&quot;; }</span>

<span class="nc" id="L124">        return &quot;Settings&quot;;</span>
    }

    @Override
    public void draw() {

<span class="nc" id="L130">        viewport.apply();</span>


<span class="nc" id="L133">        batch.setProjectionMatrix(viewport.getCamera().combined);</span>
<span class="nc" id="L134">        batch.begin();</span>
<span class="nc" id="L135">        batch.draw(textureManager.getMenuBackdropSprite(),0,0, 1280, 960);</span>
<span class="nc" id="L136">        ScreenUtils.clear(Color.BLACK);</span>

        // title
<span class="nc" id="L139">        textureManager.getMainLayout().setText(textureManager.getGameLargeFont(), &quot;Game Settings&quot;);</span>
<span class="nc" id="L140">        float titleX = 400;</span>
<span class="nc" id="L141">        float titleY = 800;</span>
<span class="nc" id="L142">        textureManager.getGameLargeFont().draw(batch, &quot;Game Settings&quot; , titleX, titleY);</span>

<span class="nc" id="L144">        textureManager.getMainLayout().setText(textureManager.getGameMediumFont(), &quot;Game Settings&quot;);</span>
<span class="nc" id="L145">        textureManager.getGameLargeFont().draw(batch, &quot;Name:&quot; , titleX-400, titleY-200);</span>
<span class="nc" id="L146">        textureManager.getGameSmallFont().draw(batch, &quot;Current Name: &quot; + name , titleX-400, titleY-300);</span>
<span class="nc" id="L147">        textureManager.getGameLargeFont().draw(batch, &quot;Difficulty:&quot; , titleX-400, titleY-400);</span>
<span class="nc" id="L148">        textureManager.getGameLargeFont().draw(batch, &quot;Music:&quot; , titleX-400, titleY-550);</span>

<span class="nc" id="L150">        batch.draw(textureManager.getLeftArrowTexture(),400+30,titleY-475, 100, 100);</span>

<span class="nc bnc" id="L152" title="All 2 branches missed.">        if (difficulty.equals(&quot;Easy&quot;)) {</span>
<span class="nc" id="L153">            textureManager.getGameMediumFont().draw(batch, &quot;Easy (0.5x Score)&quot; ,490,titleY-400);</span>
        }
<span class="nc bnc" id="L155" title="All 2 branches missed.">        else if (difficulty.equals(&quot;Normal&quot;)) {</span>
<span class="nc" id="L156">            textureManager.getGameMediumFont().draw(batch, &quot;Normal (1x Score)&quot; ,480,titleY-400);</span>
        }
<span class="nc bnc" id="L158" title="All 2 branches missed.">        else if (difficulty.equals(&quot;Hard&quot;)) {</span>
<span class="nc" id="L159">            textureManager.getGameMediumFont().draw(batch, &quot;Hard (2x Score)&quot; ,490,titleY-400);</span>
            //textureManager.getGameMediumFont().draw(batch, &quot;Mouse Coords:  &quot; + mouse.getX() + &quot;.&quot; +mouse.getY() + &quot;\nSubmit Coords: &quot; + textureManager.getNextButtonSprite().getX() + &quot;.&quot; + textureManager.getNextButtonSprite().getY(),690,450);
        }

<span class="nc" id="L163">        batch.draw(textureManager.getRightArrowTexture(),400+400+30, titleY-475 , 100, 100);</span>


        
<span class="nc" id="L167">        batch.draw(textureManager.getTwoLeftArrowTexture(),400+30,titleY-640, 100, 100);</span>
<span class="nc bnc" id="L168" title="All 2 branches missed.">        if (music) {</span>
<span class="nc" id="L169">            textureManager.getGameMediumFont().draw(batch, &quot;On&quot; ,490,titleY-575);</span>
        }
<span class="nc bnc" id="L171" title="All 2 branches missed.">        else if (!music) {</span>
<span class="nc" id="L172">            textureManager.getGameMediumFont().draw(batch, &quot;Off&quot; ,480,titleY-575);</span>
        }
<span class="nc" id="L174">        batch.draw(textureManager.getTwoRightArrowTexture(),400+200, titleY-640 , 100, 100);</span>

        

<span class="nc bnc" id="L178" title="All 2 branches missed.">        if (hoveredOver.equals(&quot;Submit&quot;)) {</span>
<span class="nc" id="L179">            batch.draw(textureManager.getHoverSubmitTexture(),600+80,580, 300, 100);</span>
        }
        else {
<span class="nc" id="L182">            batch.draw(textureManager.getSubmitTexture(),600+80,580, 300, 100);</span>
        }
            




<span class="nc" id="L189">        stage.act(Gdx.graphics.getDeltaTime());</span>
<span class="nc" id="L190">        stage.draw();</span>
<span class="nc bnc" id="L191" title="All 2 branches missed.">        if (hoveredOver.equals(&quot;Next&quot;)) {</span>
<span class="nc" id="L192">            batch.draw(textureManager.gethoverNextButtonTexture(),900,20, 300, 100);</span>
        }
        else {
<span class="nc" id="L195">            batch.draw(textureManager.getNextButtonTexture(),900,20, 300, 100);</span>
        }

<span class="nc" id="L198">        batch.end();</span>
<span class="nc" id="L199">    }</span>

    @Override
    public void resetText() {
<span class="nc" id="L203">        this.textX = 600;</span>
<span class="nc" id="L204">        this.acceleration = 40;</span>
<span class="nc" id="L205">    }</span>

    public String getDifficulty() {
<span class="nc" id="L208">        return this.difficulty;</span>
    }

    public Boolean getMusic() {
<span class="nc" id="L212">        return this.music;</span>
    }

    public void textBoxFix(){
<span class="nc" id="L216">        nameBox.dispose();</span>
<span class="nc" id="L217">    }</span>
    public void textBoxunFix(){
<span class="nc" id="L219">        nameBox = new TextBox(stage, 250+80, 600, 300, 40);</span>
<span class="nc" id="L220">    }</span>

    public String getName(){
<span class="nc" id="L223">        return this.name;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>