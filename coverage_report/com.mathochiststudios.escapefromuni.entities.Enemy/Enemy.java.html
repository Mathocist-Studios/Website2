<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Enemy.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">headless</a> &gt; <a href="index.source.html" class="el_package">com.mathochiststudios.escapefromuni.entities.Enemy</a> &gt; <span class="el_source">Enemy.java</span></div><h1>Enemy.java</h1><pre class="source lang-java linenums">package com.mathochiststudios.escapefromuni.entities.Enemy;

import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.Sprite;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.math.Rectangle;
import com.mathochiststudios.escapefromuni.Game;
import com.mathochiststudios.escapefromuni.entities.Enemy.EnemyAI.EnemyAI;
import com.mathochiststudios.escapefromuni.entities.Enemy.EnemyAI.EnemyMoveDirection;
import com.mathochiststudios.escapefromuni.entities.Enemy.EnemyAI.IEnemyAI;
import com.mathochiststudios.escapefromuni.entities.Player;
import com.mathochiststudios.escapefromuni.levels.Level;

public abstract class Enemy {

    private Texture texture;
    private float enemyX;
    private float enemyY;
    protected Rectangle enemyCollision;
<span class="fc" id="L20">    private Boolean isDead = false;</span>
    private final Sprite enemySprite;
    private final EnemyAI enemyAI;

    private IEnemyAI aiBehavior;
<span class="fc" id="L25">    private float SPEED = 5.0f;</span>
<span class="fc" id="L26">    protected double spriteScale = 1.0;</span>

    protected Game game;

    // Takes in basic enemy info with a default size of 1, 1
<span class="fc" id="L31">    public Enemy(Game game, Texture texture, float x, float y, EnemyAI aiType) {</span>

<span class="fc" id="L33">        this.game = game;</span>

<span class="fc" id="L35">        this.enemyX = x;</span>
<span class="fc" id="L36">        this.enemySprite = new Sprite(texture);</span>
<span class="fc" id="L37">        this.enemyY = y;</span>
<span class="fc" id="L38">        this.texture = texture;</span>
<span class="fc" id="L39">        this.enemyCollision = new Rectangle(enemyX, enemyY, 1, 1);</span>
<span class="fc" id="L40">        this.enemyAI = aiType;</span>

        // Instantiate the AI behavior if the enum provides a class
<span class="pc bpc" id="L43" title="2 of 4 branches missed.">        if (aiType != null &amp;&amp; aiType.getAIClass() != null) {</span>
            try {
<span class="fc" id="L45">                this.aiBehavior = aiType.getAIClass().getDeclaredConstructor().newInstance();</span>
<span class="nc" id="L46">            } catch (ReflectiveOperationException e) {</span>
                // Failed to instantiate AI; log and fall back to no AI
<span class="nc" id="L48">                e.printStackTrace();</span>
<span class="nc" id="L49">                this.aiBehavior = null;</span>
<span class="pc" id="L50">            }</span>
        } else {
<span class="nc" id="L52">            this.aiBehavior = null;</span>
        }
<span class="fc" id="L54">    }</span>

    public void render(SpriteBatch batch) {
<span class="nc bnc" id="L57" title="All 2 branches missed.">        if (isDead) {</span>
<span class="nc" id="L58">            return;</span>
        }
<span class="nc" id="L60">        batch.draw(enemySprite, enemyX - enemySprite.getWidth() / 2, enemyY - enemySprite.getHeight() / 2, (float) (3 * spriteScale), (float) (3 * spriteScale));</span>
<span class="nc" id="L61">    }</span>

    public void update(float deltaTime, Level currentLevel, Player player) {
<span class="fc bfc" id="L64" title="All 2 branches covered.">        if (isDead) {</span>
<span class="fc" id="L65">            return;</span>
        }
        // If there's an AI behavior instance, let it drive the enemy
<span class="pc bpc" id="L68" title="1 of 2 branches missed.">        if (aiBehavior != null) {</span>
<span class="fc" id="L69">            EnemyMoveDirection direction = aiBehavior.update(game, this, deltaTime, currentLevel, player, SPEED);</span>
<span class="fc" id="L70">            this.isMoving(direction);</span>
        }

<span class="fc" id="L73">        this.enemyCollision = new Rectangle(enemyX, enemyY, 1, 1);</span>

<span class="fc" id="L75">        this.localUpdate(deltaTime, currentLevel, player);</span>
<span class="fc" id="L76">    }</span>

    public void collect() {
<span class="nc" id="L79">        isDead = true;</span>
<span class="nc" id="L80">    }</span>

    public Boolean isDead() {
<span class="fc" id="L83">        return isDead;</span>
    }

    public void setDead(Boolean dead) {
<span class="fc" id="L87">        isDead = dead;</span>
<span class="fc" id="L88">    }</span>

    public void deleteEnemy() {
<span class="nc" id="L91">        texture.dispose();</span>
<span class="nc" id="L92">    }</span>

    public Rectangle getCollider() {
<span class="fc" id="L95">        return enemyCollision;</span>
    }

    public Sprite getSprite() {
<span class="fc" id="L99">        return enemySprite;</span>
    }

    public EnemyAI getAIType() {
<span class="nc" id="L103">        return enemyAI;</span>
    }

    public abstract void triggerCollisionBehavior(Player player);

    public abstract void isMoving(EnemyMoveDirection direction);

    public abstract void localUpdate(float deltaTime, Level currentLevel, Player player);

    public float getEnemyX() {
<span class="fc" id="L113">        return enemyX;</span>
    }

    public float getEnemyY() {
<span class="fc" id="L117">        return enemyY;</span>
    }

    public void setEnemyX(float x) {
<span class="fc" id="L121">        this.enemyX = x;</span>
<span class="fc" id="L122">    }</span>

    public void setEnemyY(float y) {
<span class="fc" id="L125">        this.enemyY = y;</span>
<span class="fc" id="L126">    }</span>

    public Rectangle getEnemyCollision() {
<span class="fc" id="L129">        return enemyCollision;</span>
    }

    public Texture getTexture() {
<span class="nc" id="L133">        return texture;</span>
    }

    public void setTexture(Texture texture) {
<span class="nc" id="L137">        this.texture = texture;</span>
<span class="nc" id="L138">    }</span>

    protected void setSpeed(float speed) {
<span class="fc" id="L141">        this.SPEED = speed;</span>
<span class="fc" id="L142">    }</span>

    public EnemyAI getEnemyAI() {
<span class="nc" id="L145">        return enemyAI;</span>
    }

    public IEnemyAI getAiBehavior() {
<span class="fc" id="L149">        return aiBehavior;</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>